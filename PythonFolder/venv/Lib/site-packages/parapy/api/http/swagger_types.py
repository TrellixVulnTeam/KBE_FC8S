#!/usr/bin/env python
# -*- coding: utf-8 -*-
#
# Copyright (C) 2016-2021 ParaPy Holding B.V.
#
# This file is subject to the terms and conditions defined in
# the license agreement that you have received with this source code
#
# THIS CODE AND INFORMATION ARE PROVIDED "AS IS" WITHOUT WARRANTY OF ANY
# KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
# IMPLIED WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A PARTICULAR
# PURPOSE.

"""RESTful type definitions"""

from flask_restful import fields
from flask_restful_swagger import swagger


def RenderInstancesGet(aDict):
    return dict((name, {"name": obj.__name__, 
                        "class": type(obj).__name__,
                        "module": type(obj).__module__})\
                for name, obj in aDict.items())

@swagger.model
class InstanceKeys:
    
    resource_fields = {
    "value": fields.String,
    "type" : fields.String,
    }

    required = ["value"]

    swagger_metadata  = {
        "value": {"defaultValue": "KANSAS"},
        "type": {"defaultValue": "str"}
        }

    default = """{"value": "KANSAS", "type"="str"}"""


@swagger.model
class InstancePutBody:

    resource_fields = {
    "module": fields.String(),
    "class" : fields.String(),
    "keys": fields.Nested(InstanceKeys)
    }

    required = ["module", "class"]
    
    swagger_metadata  = {
        "module": {"defaultValue": "apps.aircraft.reaper"},
        "class": {"defaultValue": "Aircraft"}
        }

    default = """
{"class": "Aircraft",
 "module": "apps.aircraft.reaper",
 "keys": {"configuration": {"value" : "TRILIFTING"}}}"""
